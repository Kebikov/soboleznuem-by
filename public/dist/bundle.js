(()=>{"use strict";window.addEventListener("DOMContentLoaded",(()=>{(function(){try{!function(){function e(e){if(window.innerWidth>1020){const t=e.target.closest(".header__line"),s=t.querySelector(".header__list-sub");function c(e){const c=t.querySelectorAll(".header__line-sub");s.classList.add("hover-sub"),c.forEach((function(e){e.classList.add("hover-sub")})),t.querySelectorAll(".header__link-sub").forEach((function(e){e.classList.add("hover-sub")}))}function l(e){const c=t.querySelectorAll(".header__line-sub");s.classList.remove("hover-sub"),c.forEach((function(e){e.classList.remove("hover-sub")})),t.querySelectorAll(".header__link-sub").forEach((function(e){e.classList.remove("hover-sub")}))}s.classList.add("hover-sub"),s.addEventListener("mouseover",c),s.addEventListener("mouseout",l),t.querySelectorAll(".header__line-sub").forEach((function(e){e.classList.add("hover-sub")})),t.querySelectorAll(".header__link-sub").forEach((function(e){e.classList.add("hover-sub")}))}}function t(e){const t=e.target.closest(".header__line");t.querySelector(".header__list-sub").classList.remove("hover-sub"),t.querySelectorAll(".header__line-sub").forEach((function(e){e.classList.remove("hover-sub")})),t.querySelectorAll(".header__link-sub").forEach((function(e){e.classList.remove("hover-sub")}))}document.addEventListener("click",(function(e){const t=e.target;if(t.closest(".header__button")){document.querySelector("body").classList.toggle("active");const e=t.closest(".header__button");e.classList.toggle("active"),e.closest(".header__burger").classList.toggle("active"),document.querySelectorAll(".header__line").forEach((function(e){e.classList.toggle("active")})),document.querySelectorAll(".header__link").forEach((function(e){e.classList.toggle("active")})),t.classList.contains("active")||document.querySelectorAll(".active-sub").forEach((function(e){e.classList.remove("active-sub")}))}if(t.closest(".header__line")&&window.innerWidth<=1020){const e=t.closest(".header__line");e.querySelector(".header__link").classList.contains("_sub")&&e.classList.toggle("active-sub"),e.querySelectorAll(".header__list-sub").forEach((function(e){e.classList.toggle("active-sub")})),e.querySelectorAll(".header__line-sub").forEach((function(e){e.classList.toggle("active-sub")})),e.querySelectorAll(".header__link-sub").forEach((function(e){e.classList.toggle("active-sub")}))}})),window.addEventListener("scroll",(function(){a(),c<=window.scrollY?(s.classList.add("fix-burger"),l.classList.add("fix-burger")):(s.classList.remove("fix-burger"),l.classList.remove("fix-burger"))})),document.querySelectorAll("._sub").forEach((function(s){s.addEventListener("mouseover",e),s.addEventListener("mouseout",t)}));const s=document.querySelector(".header__burger"),c=s.getBoundingClientRect().top,l=document.querySelector(".header__list");function a(){const e=document.documentElement.clientHeight-s.getBoundingClientRect().bottom;l.style.cssText=`max-height: ${e}px;`}a();const o=document.querySelector(".age-17");if(o){window.addEventListener("scroll",d);let i=0,r=o.getBoundingClientRect().bottom-document.documentElement.clientHeight;function d(){window.scrollY>=r&&0===i&&(function(){const e=document.getElementById("age");let t=Number(e.dataset.time),s=Number(e.dataset.start),c=Number(e.dataset.end);const l=document.getElementById("age1");let a=Number(l.dataset.time),o=Number(l.dataset.start),i=Number(l.dataset.end);const r=document.getElementById("burial");let d=Number(r.dataset.time),_=Number(r.dataset.start),u=Number(r.dataset.end);const m=document.getElementById("cremation");n(Number(m.dataset.time),Number(m.dataset.start),Number(m.dataset.end),m),n(t,s,c,e),n(a,o,i,l),n(d,_,u,r)}(),i=1)}}function n(e,t,s,c){const l=e/s;let a=1;l<10&&(a=Math.trunc(10/l));let o=setTimeout(n,l,e,a+t,s,c);t>=s&&(clearTimeout(o),t=s),c.innerText=t+"+"}}()}catch(e){console.log("",e)}})(),function(){try{const e=document.querySelector(".shop-calc");if(e){document.forms.calc;let t,s=0;document.addEventListener("click",(function(c){const l=c.target;if(l.closest(".coffin__tim")){const e=l.closest(".coffin").querySelectorAll(".coffin__item, .coffin__img, .coffin__label");for(let t of e)t.classList.toggle("active")}if(l.closest(".coffin__item")){s++;const c=l.closest(".coffin");let a=c.dataset.total;a||(t=s),c.dataset.total=t;const o=l.closest(".coffin__item"),n=o.querySelector(".coffin__img").getAttribute("src"),i=o.querySelector(".coffin__label").innerHTML,r=o.querySelector(".coffin__label").dataset.cash,d=c.querySelector(".coffin__tim-title");c.querySelector(".coffin__img-tim").setAttribute("src",n),d.innerHTML=i;let _=e.lastElementChild;if(document.querySelector(`[data-shop = "${a}"]`)){const e=document.querySelector(`[data-shop = "${a}"]`),s=e.previousSibling;e.remove(),_=s,t=a}_.insertAdjacentHTML("afterend",`<div class="shop-calc__list" data-shop="${t}" data-shop-cash = "${r}">\n                            <div class="shop-calc__img-box">\n                                <img src="${n}" alt="#">\n                            </div>\n                            <div class="shop-calc__info">\n                                <div class="shop-calc__text">${i}</div>\n                                <div class="shop-calc__cash">стоимость: ${r} руб.</div>\n                            </div>\n                            <div class="shop-calc__delete">\n                                <img src="/img/__calc/delete_icon.png" alt="#">\n                            </div>\n                        </div>`);const u=l.closest(".coffin").querySelectorAll(".coffin__item, .coffin__img, .coffin__label");for(let e of u)e.classList.remove("active")}if(l.closest(".wreath__tim")){const e=l.closest(".wreath").querySelectorAll(".wreath__item, .wreath__img, .wreath__label");for(let t of e)t.classList.toggle("active")}if(l.closest(".wreath__item")){s++;const t=l.closest(".wreath");let c=t.dataset.total;c||(t.dataset.total=s,c=t.dataset.total);const a=l.closest(".wreath__item"),o=a.querySelector(".wreath__img").getAttribute("src"),n=a.querySelector(".wreath__label").innerHTML;console.log("textCoffin",n);const i=a.querySelector(".wreath__label").dataset.cash,r=t.querySelector(".wreath__tim-title");t.querySelector(".wreath__img-tim").setAttribute("src",o),r.innerHTML=n;const d=l.closest(".wreath").querySelectorAll(".wreath__item, .wreath__img, .wreath__label");for(let e of d)e.classList.remove("active");let _=e.lastElementChild;if(document.querySelector(`[data-shop = "${c}"]`)){const e=document.querySelector(`[data-shop = "${c}"]`),t=e.previousSibling;e.remove(),_=t}_.insertAdjacentHTML("afterend",`<div class="shop-calc__list" data-shop="${c}" data-shop-cash = "${i}">\n                            <div class="shop-calc__img-box">\n                                <img src="${o}" alt="#">\n                            </div>\n                            <div class="shop-calc__info">\n                                <div class="shop-calc__text">${n}</div>\n                                <div class="shop-calc__cash">стоимость: ${i} руб.</div>\n                            </div>\n                            <div class="shop-calc__delete">\n                                <img src="/img/__calc/delete_icon.png" alt="#">\n                            </div>\n                        </div>`)}if(l.closest(".dress__tim")){const e=l.closest(".dress").querySelectorAll(".dress__item, .dress__img, .dress__label");for(let t of e)t.classList.toggle("active")}if(l.closest(".dress__item")){s++;const t=l.closest(".dress");let c=t.dataset.total;c||(t.dataset.total=s,c=t.dataset.total);const a=l.closest(".dress__item"),o=a.querySelector(".dress__img").getAttribute("src"),n=a.querySelector(".dress__label").innerHTML,i=a.querySelector(".dress__label").dataset.cash,r=t.querySelector(".dress__tim-title");t.querySelector(".dress__img-tim").setAttribute("src",o),r.innerHTML=n;const d=l.closest(".dress").querySelectorAll(".dress__item, .dress__img, .dress__label");for(let e of d)e.classList.remove("active");let _=e.lastElementChild;if(document.querySelector(`[data-shop = "${c}"]`)){const e=document.querySelector(`[data-shop = "${c}"]`),t=e.previousSibling;e.remove(),_=t}_.insertAdjacentHTML("afterend",`<div class="shop-calc__list" data-shop="${c}" data-shop-cash = "${i}">\n                            <div class="shop-calc__img-box">\n                                <img src="${o}" alt="#">\n                            </div>\n                            <div class="shop-calc__info">\n                                <div class="shop-calc__text">${n}</div>\n                                <div class="shop-calc__cash">стоимость: ${i} руб.</div>\n                            </div>\n                            <div class="shop-calc__delete">\n                                <img src="/img/__calc/delete_icon.png" alt="#">\n                            </div>\n                        </div>`)}if(l.closest(".cross__tim")){const e=l.closest(".cross").querySelectorAll(".cross__item, .cross__img, .cross__label");for(let t of e)t.classList.toggle("active")}if(l.closest(".cross__item")){s++;const t=l.closest(".cross");let c=t.dataset.total;c||(t.dataset.total=s,c=t.dataset.total);const a=l.closest(".cross__item"),o=a.querySelector(".cross__img").getAttribute("src"),n=a.querySelector(".cross__label").innerHTML,i=a.querySelector(".cross__label").dataset.cash,r=t.querySelector(".cross__tim-title");t.querySelector(".cross__img-tim").setAttribute("src",o),r.innerHTML=n;const d=l.closest(".cross").querySelectorAll(".cross__item, .cross__img, .cross__label");for(let e of d)e.classList.remove("active");let _=e.lastElementChild;if(document.querySelector(`[data-shop = "${c}"]`)){const e=document.querySelector(`[data-shop = "${c}"]`),t=e.previousSibling;e.remove(),_=t}_.insertAdjacentHTML("afterend",`<div class="shop-calc__list" data-shop="${c}" data-shop-cash = "${i}">\n                            <div class="shop-calc__img-box">\n                                <img src="${o}" alt="#">\n                            </div>\n                            <div class="shop-calc__info">\n                                <div class="shop-calc__text">${n}</div>\n                                <div class="shop-calc__cash">стоимость: ${i} руб.</div>\n                            </div>\n                            <div class="shop-calc__delete">\n                                <img src="/img/__calc/delete_icon.png" alt="#">\n                            </div>\n                        </div>`)}if(l.closest(".shop-calc__delete")){const e=l.closest(".shop-calc__list");let t=e.dataset.shop;e.remove();const s=document.querySelector(`[data-total = "${t}"]`),c=s.querySelector("[data-img]"),a=s.querySelector("[data-title]");let o=a.dataset.title,n=c.dataset.img;c.setAttribute("src",`${n}`),a.textContent=`${o}`}if(l.closest(".more")){const e=l.previousElementSibling.classList.value;if(s++,"wreath"===e){const e=document.querySelectorAll(".wreath");e[e.length-1].insertAdjacentHTML("afterend",`<div class="title-calc">Ваш выбор ритуального венка:</div>\n                            <div class="wreath" data-total="${s}">\n                                <div class="wreath__tim">\n                                    <img class="wreath__img-tim" src="/img/__calc/wreath/icon.png" alt="#" data-img="/img/__calc/wreath/icon.png">\n                                    <span class="wreath__tim-title" data-all="0" data-title="Выбор венка">Выбор венка</span>\n                                </div>\n                                <div class="wreath__item">\n                                    <img class="wreath__img" src="/img/__calc/wreath/1.png" alt="#">\n                                    <div class="wreath__label" data-cash="121">Венок ритуальный<br>(1.7 метра)</div>\n                                </div>\n                                <div class="wreath__item">\n                                    <img class="wreath__img" src="/img/__calc/wreath/2.png" alt="#">\n                                    <div class="wreath__label" data-cash="89">Венок ритуальный<br>(1.5 метра)</div>\n                                </div>\n                                <div class="wreath__item">\n                                    <img class="wreath__img" src="/img/__calc/wreath/3.png" alt="#">\n                                    <div class="wreath__label" data-cash="42">Венок ритуальный<br>(1.3 метра)</div>\n                                </div>\n                            </div>`)}if("dress"===e){const e=document.querySelectorAll(".dress");e[e.length-1].insertAdjacentHTML("afterend",`<div class="title-calc">Комплект одежды для усопшего:</div>\n                            <div class="dress" data-total="${s}">\n                                <div class="dress__tim">\n                                    <img class="dress__img-tim" src="/img/__calc/dress/dress-icon.png" alt="#" data-img="/img/__calc/dress/dress-icon.png">\n                                    <span class="dress__tim-title" data-all="0" data-title="Выбор одежды">Выбор одежды</span>\n                                </div>\n                                <div class="dress__item">\n                                    <img class="dress__img" src="/img/__calc/dress/1.jpg" alt="#">\n                                    <div class="dress__label" data-cash="55">Костюм женский</div>\n                                </div>\n                                <div class="dress__item">\n                                    <img class="dress__img" src="/img/__calc/dress/2.jpg" alt="#">\n                                    <div class="dress__label" data-cash="35">Обувь женская</div>\n                                </div>\n                                <div class="dress__item">\n                                    <img class="dress__img" src="/img/__calc/dress/3.jpg" alt="#">\n                                    <div class="dress__label" data-cash="46">Костюм мужской</div>\n                                </div>\n                                <div class="dress__item">\n                                    <img class="dress__img" src="/img/__calc/dress/4.jpg" alt="#">\n                                    <div class="dress__label" data-cash="37">Туфли мужские</div>\n                                </div>\n                            </div>`)}}if(!l.closest(".stop")&&l.closest(".start")){let t=l.parentElement,s=t.dataset.checkId,c=t.querySelector("input"),a=t.querySelector("label"),o=e.lastElementChild;if(c)if(c.checked){let e=a.textContent,c=t.dataset.praice;o.insertAdjacentHTML("afterend",`<div class="check" data-shop-cash="${c}" data-check-id="${s}">\n                                <div class="check__img">\n                                    <img src="/img/__calc/check-icon-shop.png" alt="">\n                                </div>\n                                <div class="check__info">\n                                    <div class="check__title">${e}</div>\n                                    <div class="check__praice">стоимость: ${c} руб.</div>\n                                </div>\n                                <div class="check__del">\n                                    <img src="/img/__calc/delete_icon.png" alt="">\n                                </div>\n                            </div>`)}else{let t=c.getAttribute("name");e.querySelector(`[data-check-id="${t}"]`)&&e.querySelector(`[data-check-id="${t}"]`).remove()}}if(l.closest(".check")){let t=l.closest(".check").dataset.checkId;e.querySelector(`[data-check-id="${t}"]`).remove(),document.querySelector(`.${t}`).querySelector("input").checked=!1}let a=0;const o=document.querySelectorAll("[data-shop-cash]");for(let e of o)a+=1*e.dataset.shopCash;document.querySelector(".praice").innerHTML=`Всего: ${a} руб.`}));const c=new IntersectionObserver((e=>{e.forEach((e=>{e.isIntersecting?a.classList.add("stiki"):a.classList.remove("stiki")}))}),{}),l=document.querySelector(".footer");c.observe(l);const a=document.querySelector(".praice")}}catch(e){console.log(e)}}(),function(){try{document.querySelector("[data-json]"),function(){const e=document.querySelector(".shop-block"),t=document.querySelector(".button-sort"),s=document.querySelector(".button-sort__praice-box"),c=document.querySelector('[name="from"]'),l=document.querySelector('[name="before"]'),a=e.getAttribute("data-json");let o=0,n=0;function i(t){"ajax/coffins.json"===a&&t.forEach((t=>{e.insertAdjacentHTML("beforeend",`\n                        <div class="shop-block__item flex_coffins">\n                                    <div class="card">\n                                        <div class="card__body">\n                                            <div class="card__title">${t.title}</div>\n                                            <div class="card__img card__img_height">\n                                                <picture>\n                                                    <source srcset='${t.img1}'>\n                                                    <source srcset='${t.img2}'>\n                                                    <source srcset='${t.img3}'>\n                                                    <img src='${t.img4}' alt="гроб">\n                                                </picture>\n                                            </div>\n                                            <div class="card__prais">${t.prais}</div>\n                                            <a class="card__button" href="contacts.html">купить</a>\n                                        </div>\n                                    </div>\n                                </div>\n                        `)})),"ajax/wreaths.json"===a&&t.forEach((t=>{e.insertAdjacentHTML("beforeend",`\n                        <div class="shop-block">    \n                            <div class="shop-block__item  flex-wreaths">\n                                <div class="card">\n                                    <div class="card__body">\n                                        <div class="card__title">${t.title}</div>\n                                        <div class="card__img card__img_height-wreaths">\n                                            <picture>\n                                                <source srcset=${t.img1} type="image/webp">\n                                                <img src=${t.img2} alt="Венок ритуальный">\n                                            </picture>\n                                    </div>\n                                    <div class="card__prais">${t.prais}</div>\n                                    <a class="card__button" href="contacts.html">купить</a>\n                                </div>\n                            </div>\n                        </div>\n                        `)}))}function r(e){return e.sort(_)}function d(e){return r(e).reverse()}function _(e,t){let s=+`${e.prais}`.match(/\d+.?\d+?/g).join(""),c=+`${t.prais}`.match(/\d+.?\d+?/g).join("");return s>c?1:s<c?-1:s===c?0:void 0}function u(e){document.querySelectorAll("._sort-color").forEach((e=>{e.classList.remove("_sort-color")})),e.classList.add("_sort-color")}function m(t){n=c.value?+c.value:0,o=l.value?+l.value:1e4,fetch(a).then((e=>e.json())).then((s=>{e.innerHTML="";let c=s.filter(((e,t,s)=>{let c=+e.prais.match(/\d+.?\d+?/g).join("");if(o>c&&c>n)return s}));c.length||e.insertAdjacentHTML("beforeend",'<div class="shop-block__not">Извините, нет подходящих товаров.</div>'),i(t(c))}))}fetch(a).then((e=>e.json())).then((e=>{i(d(e))})),t.addEventListener("click",(e=>{let t=e.target;t.classList.contains("button-sort__cheap")&&(u(t),m(r)),t.classList.contains("button-sort__lot")&&(u(t),m(d))})),s.addEventListener("input",(()=>{document.querySelector("._sort-color").classList.contains("button-sort__lot")?m(d):m(r)}))}()}catch(e){console.log("",e)}}(),function(){try{const e=document.querySelector(".order-call");!function(){const e=document.querySelector(".order-call"),t=document.querySelectorAll('[data-popup="open"]'),s=e.querySelector(".order-call__title"),c=document.body;t.forEach((t=>{t.addEventListener("click",(()=>{e.style.display="flex",c.style.overflow="hidden",t.hasAttribute("data-name-button")&&(s.textContent=t.getAttribute("data-name-button"))}))})),e.addEventListener("click",(t=>{c.style.overflow="auto",t.target.closest(".order-call__x")&&(e.style.display="none")}))}(),function(){const e=document.querySelector(".order-call__tel"),t=document.querySelector(".order-call__tel-div");e.addEventListener("click",(()=>function(e,t,s,{classOne:c,classTwo:l}){try{function a(t,s){e.value.length===t&&(e.value=e.value.slice(0,t-1)+s+e.value[t-1])}e.value="+375",e.addEventListener("input",(()=>{"("===e.value[e.value.length-1]||")"===e.value[e.value.length-1]||"-"===e.value[e.value.length-1]?e.value=e.value.slice(0,e.value.length-1):(e.value.length<4&&(e.value="+375"),a(5,"("),a(8,")"),a(12,"-"),a(15,"-"),e.value.length>16&&(e.value=e.value.slice(0,17)),/^\+375\(?\d?\d?\)?\d?\d?\d?-?\d?\d?-?\d?\d?$/.test(e.value)?(0===s&&(t.style.boxShadow="0px 0px 2px 2px rgba(22, 255, 138, 0.663) inset"),1===s&&(e.style.border="#28b352 2px solid")):(0===s&&(t.style.boxShadow="0px 0px 3px 3px rgba(255, 22, 22, 0.9) inset"),1===s&&(e.style.border="#ec3c3c 2px solid"))),17===e.value.length&&/^\+375\(?\d?\d?\)?\d?\d?\d?-?\d?\d?-?\d?\d?$/.test(e.value)?t.classList.contains(c)&&(t.classList.remove(c),t.classList.add(l)):t.classList.contains(l)&&(t.classList.remove(l),t.classList.add(c))}))}catch(o){console.log("",o)}}(e,t,1,{classOne:"_grey",classTwo:"_green"})))}();const t=document.querySelector(".order-call__name");!function(){const s=document.querySelector(".order-call__button"),c=document.querySelector(".order-call__tel"),l=document.body,a=document.querySelector(".anime-meil");s.addEventListener("click",(function(o){let n=document.querySelector(".order-call__title").textContent;console.log("",n),o.preventDefault,t.value.length<3&&(t.value="",t.setAttribute("placeholder","Минимум 3 символа."));const i=document.forms.popup;if(17===c.value.length&&/^\+375\(?\d?\d?\)?\d?\d?\d?-?\d?\d?-?\d?\d?$/.test(c.value)&&t.value){let o=new FormData(i);o.set("title",n),l.style.overflow="hidden",a.style.display="block",fetch("popup.php",{method:"POST",body:o}).then((o=>{200===o.status&&(l.style.overflow="auto",a.style.display="none",s.textContent="заявка отправлена",t.value="",c.value="Cпасибо за заказ !",setTimeout((()=>{e.style.display="none"}),1500))}))}else s.textContent="проверьте данные",setTimeout((()=>{s.textContent="заказать по акции"}),2e3)}))}()}catch(e){console.log("",e)}}(),function(){try{const e=document.querySelectorAll("[data-textPrace]"),t=document.querySelector("[data-prace]"),s=(new Date).getTime();e&&fetch(`../../ajax/posobie.json?v=${s}`).then((e=>e.json())).then((t=>{e.forEach((e=>{e.innerHTML=t.textPrace}))})),t&&fetch(`../../ajax/posobie.json?v=${s}`).then((e=>e.json())).then((e=>{t.innerHTML=e.prace}))}catch(e){console.log(e)}}(),async function(){document.querySelector(".coffin-img")&&await fetch("https://api.ipify.org?format=json").then((e=>e.json())).then((e=>{const t=e.ip;fetch("/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({ip:t})}).then((e=>console.log("Status Fetch >>>",e.status))).catch((e=>console.log("Error fetch >>>",e)))}))}()}))})();
//# sourceMappingURL=bundle.js.map